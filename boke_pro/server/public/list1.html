<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>最新博客</title>
    <link rel="stylesheet" href="./css/mybase.css" />
    <script src="/js/myjs.js"></script>
</head>

<body>
    <!-- 渐变色 -->
    <header class="topLine"></header>
    <!-- 导航栏 -->
    <div class="top">
        <span>王康的个人博客</span>
        <nav>
            <a href="/index.html">首页</a>
            <a href="/list.html">个人博客日记</a>
            <a href="/list1.html">最新博文</a>
            <a href="/youxiu.html">优秀个人博客</a>
            <a href="/aboutme.html">关于我</a>
            <a href="/admin/shoucang">收藏列表</a>
            <a href="/store.html">商城</a>
        </nav>
    </div>
    <!-- 主体部分 -->
    <div id="body">
        <!--最新博客-->
        <div class="newblog-list">
            <div class="topBtn">
                <h4>最新博文</h4>
                <hr>
            </div>
            <ul>
                <!-- 置顶 -->
                <li class="top" id="newBlog_top">
                    <p><span>【顶】</span>别让这些闹心的套路,毁了你的网页设计</p>
                    <ul>
                        <li><img src="1.jpg"></li>
                        <li><img src="1.jpg"></li>
                        <li><img src="1.jpg"></li>
                        <li><img src="1.jpg"></li>
                    </ul>
                    <P>如图，要实现上图效果，我采用如下方法：1、首先在
                        数据库模型，增加字段，分别是图片2，图片3。2、增
                        加标签模板，用if，else if 来判断，输出。思路已打
                        开，样式调用就可以多样化啦！</P>
                    <div class="footer">
                        <img src="1.jpg" /><span>王康 2007-02-21</span><span>【<a href="#">标签一</a>】</span>
                    </div>
                </li>
                <li class="common">
                    <h3>【个人博客网站制作】自己不会个人博客网站制作，你会选择用什么博客程序源码?</h3>
                    <img src="1.jpg">
                    <p>这些开源的博客程序源码，都是经过很多次版本测试的，都有固定的使用人群。
                        我所知道的主流的博客程序有，Z-blog，Emlog，WordPress，Typecho等，免费的cms系统有，织梦cms（dedecms），phpcms，帝国cms（EmpireCMS）！
                    </p>
                    <div class="footer">
                        <img src="1.jpg" /><span>王康 2007-02-21</span><span>【<a href="#">标签一</a>】</span>
                    </div>
                    <a href="#">阅读更多</a>
                </li>
                <li class="common">
                    <h3>【个人博客网站制作】自己不会个人博客网站制作，你会选择用什么博客程序源码?</h3>
                    <img src="1.jpg">
                    <p>这些开源的博客程序源码，都是经过很多次版本测试的，都有固定的使用人群。
                        我所知道的主流的博客程序有，Z-blog，Emlog，WordPress，Typecho等，免费的cms系统有，织梦cms（dedecms），phpcms，帝国cms（EmpireCMS）！
                    </p>
                    <div class="footer">
                        <img src="1.jpg" /><span>王康 2007-02-21</span><span>【<a href="#">标签一</a>】</span>
                    </div>
                    <a href="#">阅读更多</a>
                </li>
                <li class="common">
                    <h3>【个人博客网站制作】自己不会个人博客网站制作，你会选择用什么博客程序源码?</h3>
                    <img src="1.jpg">
                    <p>这些开源的博客程序源码，都是经过很多次版本测试的，都有固定的使用人群。
                        我所知道的主流的博客程序有，Z-blog，Emlog，WordPress，Typecho等，免费的cms系统有，织梦cms（dedecms），phpcms，帝国cms（EmpireCMS）！
                    </p>
                    <div class="footer">
                        <img src="1.jpg" /><span>王康 2007-02-21</span><span>【<a href="#">标签一</a>】</span>
                    </div>
                    <a href="#">阅读更多</a>
                </li>
                <li class="common">
                    <h3>【个人博客网站制作】自己不会个人博客网站制作，你会选择用什么博客程序源码?</h3>
                    <img src="1.jpg">
                    <p>这些开源的博客程序源码，都是经过很多次版本测试的，都有固定的使用人群。
                        我所知道的主流的博客程序有，Z-blog，Emlog，WordPress，Typecho等，免费的cms系统有，织梦cms（dedecms），phpcms，帝国cms（EmpireCMS）！
                    </p>
                    <div class="footer">
                        <img src="1.jpg" /><span>王康 2007-02-21</span><span>【<a href="#">标签一</a>】</span>
                    </div>
                    <a href="#">阅读更多</a>
                </li>
                <li class="common">
                    <h3>【个人博客网站制作】自己不会个人博客网站制作，你会选择用什么博客程序源码?</h3>
                    <img src="1.jpg">
                    <p>这些开源的博客程序源码，都是经过很多次版本测试的，都有固定的使用人群。
                        我所知道的主流的博客程序有，Z-blog，Emlog，WordPress，Typecho等，免费的cms系统有，织梦cms（dedecms），phpcms，帝国cms（EmpireCMS）！
                    </p>
                    <div class="footer">
                        <img src="1.jpg" /><span>王康 2007-02-21</span><span>【<a href="#">标签一</a>】</span>
                    </div>
                    <a href="#">阅读更多</a>
                </li>
                <li class="common">
                    <h3>【个人博客网站制作】自己不会个人博客网站制作，你会选择用什么博客程序源码?</h3>
                    <img src="1.jpg">
                    <p>这些开源的博客程序源码，都是经过很多次版本测试的，都有固定的使用人群。
                        我所知道的主流的博客程序有，Z-blog，Emlog，WordPress，Typecho等，免费的cms系统有，织梦cms（dedecms），phpcms，帝国cms（EmpireCMS）！
                    </p>
                    <div class="footer">
                        <img src="1.jpg" /><span>王康 2007-02-21</span><span>【<a href="#">标签一</a>】</span>
                    </div>
                    <a href="#">阅读更多</a>
                </li>
                <li class="common">
                    <h3>【个人博客网站制作】自己不会个人博客网站制作，你会选择用什么博客程序源码?</h3>
                    <img src="1.jpg">
                    <p>这些开源的博客程序源码，都是经过很多次版本测试的，都有固定的使用人群。
                        我所知道的主流的博客程序有，Z-blog，Emlog，WordPress，Typecho等，免费的cms系统有，织梦cms（dedecms），phpcms，帝国cms（EmpireCMS）！
                    </p>
                    <div class="footer">
                        <img src="1.jpg" /><span>王康 2007-02-21</span><span>【<a href="#">标签一</a>】</span>
                    </div>
                    <a href="#">阅读更多</a>
                </li>
                <li class="common">
                    <h3>【个人博客网站制作】自己不会个人博客网站制作，你会选择用什么博客程序源码?</h3>
                    <img src="1.jpg">
                    <p>这些开源的博客程序源码，都是经过很多次版本测试的，都有固定的使用人群。
                        我所知道的主流的博客程序有，Z-blog，Emlog，WordPress，Typecho等，免费的cms系统有，织梦cms（dedecms），phpcms，帝国cms（EmpireCMS）！
                    </p>
                    <div class="footer">
                        <img src="1.jpg" /><span>王康 2007-02-21</span><span>【<a href="#">标签一</a>】</span>
                    </div>
                    <a href="#">阅读更多</a>
                </li>
                <li class="common">
                    <h3>【个人博客网站制作】自己不会个人博客网站制作，你会选择用什么博客程序源码?</h3>
                    <img src="1.jpg">
                    <p>这些开源的博客程序源码，都是经过很多次版本测试的，都有固定的使用人群。
                        我所知道的主流的博客程序有，Z-blog，Emlog，WordPress，Typecho等，免费的cms系统有，织梦cms（dedecms），phpcms，帝国cms（EmpireCMS）！
                    </p>
                    <div class="footer">
                        <img src="1.jpg" /><span>王康 2007-02-21</span><span>【<a href="#">标签一</a>】</span>
                    </div>
                    <a href="#">阅读更多</a>
                </li>
            </ul>

            <!-- 分页模块 -->
            <div class="page" id="page">
                <a href="#" class="prev"> 上一页</a>
                <a href="#">1</a>
                <a href="#" class="active">2</a>
                <a href="#">3</a>
                <a href="#">4</a>
                <a href="#">5</a>
                <a href="#" class="next">下一页</a>
            </div>

        </div>
        <div class="warp_list">
            <!-- 个人介绍 -->
            <div class="myCard_last">
                <h4 class="myIDCard">我的名片</h4>
                <p class="nikename">网名:dlose</p>
                <p class="address">居住地:武汉洪山区</p>
                <p class="email">email:663134643@qq.com</p>
            </div>

            <!-- 点击排行榜 -->
            <div class="clicklist">
                <h4>点击排行榜</h4>
                <hr>
                <ul id="clicklist_ul">
                    <li>博客一</li>
                    <li>博客二</li>
                    <li>博客三</li>
                    <li>博客四</li>
                </ul>
            </div>

            <!-- 4.推荐博客 -->
            <div class="ecommend_blogs">
                <h4>站长推荐</h4>
                <hr>
                <ul id="ecommend_blogs_ul">
                    <li>
                        <img src="1.jpg">
                        <p>十条设计原则教你学会如何设计网页布</p>
                    </li>
                    <li>
                        <img src="1.jpg">
                        <p>十条设计原则教你学会如何设计网页布</p>
                    </li>
                    <li>
                        <img src="1.jpg">
                        <p>十条设计原则教你学会如何设计网页布</p>
                    </li>
                    <li>
                        <img src="1.jpg">
                        <p>十条设计原则教你学会如何设计网页布</p>
                    </li>
                    <li>
                        <img src="1.jpg">
                        <p>十条设计原则教你学会如何设计网页布</p>
                    </li>
                    <li>
                        <img src="1.jpg">
                        <p>十条设计原则教你学会如何设计网页布</p>
                    </li>
                    <li>
                        <img src="1.jpg">
                        <p>十条设计原则教你学会如何设计网页布</p>
                    </li>
                </ul>
            </div>

            <!-- 美术图片 -->
            <div class="pic">
                <div class="warpView">
                    <img src="2.jpg">
                </div>
            </div>
            <!-- 建站时间 -->
            <div class="note">
                <h4>友情链接</h4>
                <hr>
                <a href="#">申请链接</a>
            </div>
        </div>
    </div>

    <footer class="bodyfooter-list1">
        <div class="top">

        </div>

    </footer>
    <script>
        getclickTop4();
        loadEcommendBlogsData();

        getTopBoke(newBlog_top)
        getblogData(9)
        var pageTotal = 0;
        ajax_get("http://localhost:8080/blog/getCount", (result) => {
            var count = parseInt(result["data"][0]["count(bid)"]);
            if (isNaN(count)) {
                return;
            }
            var pageSize = Math.floor((count - 1) / 9 + 1);
            pageTotal = pageSize;
            console.log("查询分页数据时候 pageSize" + pageSize + "总数据" + count);
            // <a href="#" class="prev"> 上一页</a>
            //     <a href="#">1</a>
            //     <a href="#" class="active">2</a>
            //     <a href="#">3</a>
            //     <a href="#">4</a>
            //     <a href="#">5</a>
            //     <a href="#" class="next">下一页</a>
            var html = ""
            html += html + `<a href="#" class="prev"> 上一页</a>`
            for (let i = 0; i < pageSize; i++) {
                html += `<a href="javascript:pageClick('${i + 1}')">${i + 1}</a>`
                if (i > 5) {
                    html += `<a href="#">...</a>`
                    break;
                }
            }
            html += ` <a href="javascript:pageClick('2');" class="next">下一页</a>`;
            page.innerHTML = html;
        })

        function pageClick(n) {
            console.log("分页a标签被点击");
            var currentPage = parseInt(n) - 1;
            var html = "";
            if (currentPage > 0) {
                html += `<a href="javascript:pageClick('${currentPage}')" class="prev"> 上一页</a>`
            } else {
                html += `<a href="#" class="prev"> 上一页</a>`;
            }

            for (let i = 0; i < pageTotal; i++) {
                if (currentPage == i) {
                    html += `<a href="javascript:pageClick('${i + 1}')" class="active">${i + 1}</a>`
                } else {
                    html += `<a href="javascript:pageClick('${i + 1}')">${i + 1}</a>`
                }
                if (i > 5) {
                    html += `<a href="#">...</a>`
                    break;
                }
            }

            if (currentPage + 2 > pageTotal) {
                html += ` <a href="#" class="next">下一页</a>`;
            } else {
                html += ` <a href="javascript:pageClick('${currentPage + 2}')" class="next">下一页</a>`;
            }
            page.innerHTML = html;


            var url = "http://localhost:8080/blog/getblog?count=9&start=" + currentPage * 9;
            console.log(`============================当前起始下标数据${currentPage * 9}`);
            ajax_get(url, (obj) => {
                var dataArray = obj["data"];
                var liArray = document.getElementsByClassName("common");
                console.log(liArray);
                for (let i = 0; i < dataArray.length; i++) {
                    var model = dataArray[i];
                    var li = liArray[i];

                    var imgs = parseImgUrlByContent(model.bcontent);

                    var subContent = "";
                    var content = deleteHTMLStr(model.bcontent);
                    if (content.length > 100) {
                        subContent = content.substr(0, 100) + "...";
                    } else {
                        subContent = content;
                    }
                    var label = getLableByNunber(model.labelId)
                    var date = new Date(model.btiem);

                    var label = getLableByNunber(model.labelId)

                    li.innerHTML = `
                 <h3>${model.btitle}</h3>
                    <img src="${imgs[0]}">
                    <p>${subContent}
                    </p>
                    <div class="footer">
                        <img src="1.jpg" /><span>王康 ${date.toLocaleDateString()}</span><span>【<a href="#">${label}</a>】</span>
                    </div>
                    <a href="/info.html?bid=${model.bid}">阅读更多</a>
            
            `
                }
            });
        }
    </script>
</body>

</html>